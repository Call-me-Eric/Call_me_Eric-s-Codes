# NOIP 信心赛

**一、题目总览**

| 题目名称 | 于等 | 排序 | 简单的选择题 | 亲合力 |
| :----------: | :----------: | :----------: | :----------: | :----------: |
| 子目录名 | slauqe | sort | mex | avidity |
| 源程序文件名 | slauqe.cpp | sort.cpp | mex.cpp | avidity.cpp |
| 输入文件 | slauqe.in | sort.in | mex.in | avidity.in |
| 输出文件 | slauqe.out | sort.out | mex.out | avidity.out |
| 时间限制 | 3000ms | 1000ms | 1000ms | 3000ms |
| 空间限制 | 512MB | 512MB | 512MB | 512MB |
| 子任务开启 | 否 | 是 | 否 | 否 |
| 测试点数量 | 20 | 4 | 20 | 10 |

**二、编译选项**

```-O2 -std=c++14 -Wl,--stack=2147483647```

**三、注意事项**

1. 每道题目需单独建立对应子文件夹。
2. 题目难度不一定按乱序排序。
3. 保证每道题的时间空间限制至少为标程的 1.5 倍。
4. 建议使用下发的指定快读程序读入数据。
5. 请不要在意小 Z 和小 T 写的题目背景。
6. 题目真不难，请喧哗的 AK 不要大声同学。

---



# 一、于等(slauqe)

## 题目背景

> Earth Quake Used A Long Shadow;
Smiles Lies At Ur Queries Emotionally.

小 T 喜欢 $1$ 和 $2$。

## 题目描述

小 T 手里有两个长度为 $n$ 的，仅由 $1,2$ 构成的序列 $a,b$。

现在小 T 想要从 $1,2,\dots, n$ 中选出若干个位置，满足被选的位置的 $a_i$ 之和等于没被选的位置的 $a_i$ 之和，同时满足被选的位置的 $b_i$ 之和等于没被选的位置的 $b_i$ 之和。

可是小 T 太菜了，需要你的帮助。请你帮小 T 构造出任意一种方案，满足他的要求。若无法构造出可行方案，输出 `-1`。

---

**形式化题意：**

给定两个长度为 $n$ 的，仅由 $1,2$ 构成的序列 $a,b$。请构造一个仅由 $0,1$ 构成的序列 $c$，满足：

- 长为 $n$。
- $\sum\limits_{i=1}^na_i[c_i=0]=\sum\limits_{i=1}^na_i[c_i=1]$
- $\sum\limits_{i=1}^nb_i[c_i=0]=\sum\limits_{i=1}^nb_i[c_i=1]$

若无解，输出 `-1`；否则输出任意一种方案。

## 输入格式

**本题有多组数据。**

第一行一个正整数 $T$ 表示数据组数。

对于每组数据：

第一行一个正整数 $n$。

第二行 $n$ 个正整数 $a_i$。

第三行 $n$ 个正整数 $b_i$。

## 输出格式

对于每组数据：

若无解，输出一行 `-1`。

否则，输出一行 $n$ 个整数 $c_i$，用空格隔开。若 $c_i$ 为 $1$ 表示你选了这个位置，否则表示没选。你需要保证 $c_i\in\{0,1\}$。

## 样例 #1

### 样例输入 #1

```
4
4
1 1 2 2
1 2 1 2
6
1 2 1 1 2 1
2 1 2 1 2 2
3
1 1 2
2 1 1
13
1 1 2 1 1 2 2 1 1 1 1 1 1
2 1 2 2 2 1 2 1 2 2 1 2 2
```

### 样例输出 #1

```
0 1 1 0
0 0 0 1 1 1
-1
1 0 1 1 1 1 0 0 0 0 0 0 1
```

## 提示

对于 $10\%$ 的数据：$n\le 20$。

对于 $30\%$ 的数据：$n\le 200$。

对于 $60\%$ 的数据：$n\le 2\times 10^3$。

对于 $100\%$ 的数据：$T\le 10$，$1\le n\le 2\times 10^5$，$a_i,b_i\in\{1,2\}$。

### **注意：**本题的数据输入量较大，建议使用提供的快读。**使用该快读时不支持键盘输入。**

---



# 二、排序(sort)

## 题目背景

在情感中，美好的并不一定是有序的。

## 题目描述

对一个序列区间 $[l,r]$ 进行排序的代价为 $r-l+1$ 。

显然对于一个序列一定可以通过多次（包括 $0$ 次）排序操作使其有序。

定义一个序列的魅力值为使序列变得有序的最小代价和。给出一个长度为 $n$ 的序列，请求出每个子段的魅力值之和。

## 输入格式

第一行一个正整数 $n$ 表示序列长度。

接下来一行 $n$ 个正整数表示一个序列。

## 输出格式

一个整数 $ans$ 表示答案。

## 样例 #1

### 样例输入 #1

```
3
3 10 6
```

### 样例输出 #1

```
4
```

## 样例 #2

### 样例输入 #2

```
12
2 6 13 3 15 5 10 8 16 9 11 18
```

### 样例输出 #2

```
289
```

## 提示

**【样例1解释】**

只有子段 $\{3,10,6\}$ ，$\{10,6\}$ 对答案分别有贡献为 $2$，总和为 $2 + 2 = 4$ 。

**【数据范围】**

对于 $100\%$ 的数据，有 $n\le 3\times10^6,a_i\le 10^9$ 。保证输入数据合法。

**本题分 Subtask 评测**

- Subtask 1（5 points）：$n,m\le300$
- Subtask 2（15 points）：$n,m\le 5\times 10^3$
- Subtask 3（30 points）：$n,m\le 10^5$
- Subtask 4（50 points）：没有特殊限制

**【注意】**本题输入量较大，建议使用较快的读入方式。

---



# 三、简单的选择题(mex)

## 题目背景

当文化课和情感问题只能二选一，你选哪个。

小 H：我选文化课。

小 L：我选文化课。

小 Z：我选不出来。

## 题目描述

定义 $S$ 为一个二元组可重集合。

现在要对 $S$ 的每个二元组，选择其中一个数加入集合 $T$ 中。再定义集合 $A$ 为在 $T$ 中出现次数为奇数的数的集合。要求最大化 $A$ 中没有出现的最小的正整数，记为 $Ans$。

初始时 $S$ 为空，$n$ 次操作，每次往 $S$ 中加入一个二元组，请求出此时的 $Ans$。

## 输入格式

因为出题人不喜欢太大的输入数据，所以采用以下输入方式。

有一个数 $x$ 初始为 $0$，第 $i$ 次操作后令 $x \leftarrow x \operatorname{xor} (Ans \times i)$。

第一行输入五个数 $n,T,seed1,seed2,p$。

之后 $T$ 行每行输入两个数表示加入的二元组。

剩下的 $n-T$ 个二元组用以下方式生成：

令当前为第 $i$ 次操作，取前一次操作完后的 $x$，该二元组即为 $\{(x\times i \operatorname{xor} seed1)\mod p+1,(x\times i \operatorname{xor} seed2)\mod p+1\}$。

如果有歧义请以下发文件中 gen.cpp 为基准。

## 输出格式

输出一行，一个数表示最终的 $x$。

## 样例 #1

### 样例输入 #1

```
5 5 0 0 1
1 2
1 3
2 3 
4 5
1 2
```

### 样例输出 #1

```
19
```

## 提示

#### 【样例解释】

样例中五次操作后的答案分别为 $2,3,4,5,3$。

对于每次操作后的 $S$，给出一种可能的 $T$：

- $\{1\}$
- $\{1,2\}$
- $\{1,2,3\}$
- $\{1,2,3,4\}$
- $\{1,1,1,2,4\}$

#### 【数据范围与约定】

- 对于 $10\%$ 的数据，$n\le20$。
- 对于 $30\%$ 的数据，$n\le2000$。
- 对于另外 $10\%$ 的数据，$T=0$。
- 对于另外 $10\%$ 的数据，$T=n$。
- 对于另外 $10\%$ 的数据，$p=998244353$。
- 对于 $100\%$ 的数据，$n\le10^6,T\le2\times10^4,1\le seed1,seed2\le 10^7,p\le10^9$。

---

# 四、亲合力(avidity)

## 题目描述

辛给了你一个长度为 $n$ 的序列 $a$。

他会询问你 $m$ 次，每次询问给你两个数 $l$ 和 $r$。

而你需要回答有几个三元组 $(i,j,k)$，满足 $a_i^2+a_j^2=a_k^2$ 且 $l\le i,j,k\le r,a_i< a_j$。

简而言之，就是求  

$$\sum_{i=l}^{r}\sum_{j=l}^{r}\sum_{k=l}^{r}[a_i^2+a_j^2=a_k^2][a_i<a_j]$$

凉心出题人希望强制你在线。

## 输入格式

第一行输入两个正整数 $n$ 和 $m$。

第二行输入 $n$ 个正整数，表示序列 $a$。

接下来 $m$ 行，每行两个正整数 $l',r'$。

令上次询问答案为 $lst$，再令 $a=(l'+lst)\bmod n+1,b=(r'+lst)\bmod n+1$，则真正的询问参数 $l=\min(a,b),r=\max(a,b)$。

如果没有上一次询问则将 $lst$ 视为 $0$。

## 输出格式

输出共 $m$ 行，表示每次询问的答案。

## 样例 #1

### 样例输入 #1

```
3 2
3 4 5
0 2
0 2
```

### 样例输出 #1

```
1
0
```

## 样例 #2

### 样例输入 #2

```
5 3
5 12 13 9 15
0 2
1 3
0 4
```

### 样例输出 #2

```
1
0
2
```

## 提示

数据范围：

| 任务 | $n,m$ | $a$ | 分值 |
| :----------: | :----------: | :----------: | :----------: |
| $1$ | $\le 10^2$ | $\le 10^2$ | 10 |
| $2$ | $\le 5\times 10^4$ | $\in\{3,4,5\}$ | 10 |
| $3$ | $\le 10^3$ | $\le 10^2$ | 10 |
| $4$ | $\le 10^3$ | $\le 5\times 10^4$ | 20 |
| $5$ | $\le 5\times 10^4$ | $\le 10^2$ | 20 |
| $6$ | $\le 5\times 10^4$ | $\le 5\times 10^4$ | 30 |

对于 $100\%$ 的数据：$1\le n,m,a_i\le 5\times 10^4$。

---
