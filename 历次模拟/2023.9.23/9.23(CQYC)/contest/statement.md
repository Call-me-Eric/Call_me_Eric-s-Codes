# NOIP2023 模拟赛

|     题目名称      | 光之剑 | 迈构 |  醒幸  |  亚梓莎  |
|:----------------:| :--------------: | :---------: | :--------: |:--------:|
|     题目类型      |      传统型      |   传统型    |   传统型   |   传统型   |
|   可执行文件名    |       arisu      |     band     |   hoshi   |   slim   |
|    输入文件名     |      arisu.in    |   band.in    | hoshi.in  | slim.in  |
|    输出文件名     |     arisu.out    |   band.out   | hoshi.out | slim.out |
|  每个测试点时限    |      1.0 秒      |   1.0 秒    |   1.0 秒   |   3.0 秒 |
|     内存限制      |     256 MiB     |  256 MiB   |  256 MiB  |  256 MiB|
| 子任务/测试点数目  |        3        |      7      |     2      |     4     |
|     是否等分      |        否       |     否      |     否       |     否   |

提交源文件程序名

| 对于C++语言 | arisu.cpp | band.cpp | hoshi.cpp |slim.cpp |
| ----- | ------- | ------- | ---------- | ---------- |

编译选项

| 对于C++语言 | -lm  -O2 -std=c++14 |
| ----------- | ------------------- |

**注意事项(请仔细阅读)**

1. ⽂件名（程序名和输⼊输出⽂件名）必须使用英文小写。
2. C/C++ 中函数 main() 的返回类型必须是 int，程序正常结束时返回值必须是 0。
3. 选手提交的程序代码文件请**建立子目录，并在子目录外也保存一份代码**。
4. 若无特殊说明，结果的比较方式为全文比较（过滤行末空格及文末回车）。
5. 选手提交的程序源文件必须不大于 100KB。
6. 程序可使用的栈空间内存限制于题目的内存限制一直。
7. 使用 std::deque 等 STL 容器时，请注意其内存空间消耗。
8. 评测时采用的机器配置为 Intel(R) Core(TM) i5-10500 CPU，内存 8GiB。上述时限以此配置为准。
9. 评测在 Windows 10 下进行，使用 LemonLine 进行评测。

**Tip:** 不保证题目难度顺序排列，题目比较简单，AK 的同学可以做自己的事。:)
<div STYLE="page-break-after: always;"></div>  

# <center> 光之剑（arisu）

## 【题目背景】
$Hikari \ no \ kenn$！

## 【题目描述】
$Arisu$ 在做游戏的时候遇到了一个很困难的问题：求序列最大值！  
但是她很快找到了解决办法，不过是错的！  

$Arisu$ 会从序列第一个元素开始依次枚举每个数，如果碰到一个数满足它后面连续 $k$ 个数都比它小，那么就把它当做序列最大值。（如果找不到，则会输出真正的最大值）  

$Arisu$ 并不是故意做错的，为了帮助可爱的她，你决定出手！  

具体来说，你需要求出有多少长度为 $n$ 的排列满足使用 $Arisu$ 的方法求这个排列的最大值会得到错误的结果。因为答案很大，只需要求出答案对 $10^9+7$ 取模后的结果。
## 【输入输出格式】

### 输入
一行两个整数 $n$ 和 $k$。

### 输出
一行一个整数 $ans$ 表示答案。

## 【题目样例】

### 样例输入1
```
5 2
```

### 样例输出1
```
22
```

### 样例输入2
```
5 3
```

### 样例输出2
```
6
```

### 样例输入3
```
6 3
```

### 样例输出3
```
84 
```


## 【数据范围】
|子任务编号 |数据范围|分值|子任务依赖|
|:------:|:-------------------------:|:------:|:-------:|
|1       |$1 \le n,k \le 10$               |20      |无       |
|2       |$1 \le n,k \le 5000$             |40      |1        |
|3       |$1 \le n,k \le 10^6$             |40      |1,2      |
<div STYLE="page-break-after: always;"></div>

# <center> 迈构

## 【题目背景】
我是来结束乐队的，你们来干什么？

## 【题目描述】
$Soyo$ 决定做个了断，因此她需要前往 LiveHouse。街道形成了一棵树，而 $Anon$ 为了考验 $Soyo$ 的决心，选择给她出了一道题：  
对于一棵点数为 $n$的树，我们定义一个函数 $f(T)$：

- 若 $n=1$，$f(T)=1$
- 若 $n>1$，
    - 我们定义 $T_u(e)$ 和 $T_v(e)$ 为将边 $e$ 从 $T$ 中删除后得到的两棵子树，（将这两棵子树分别作为 $T_u(e)$ 的两种情况视为相同的情况。  
    - $f(T)=\Large{\frac{\sum_{e \in E(T)} f(T_u(e)) \times f(T_v(e))}{n}}$

$Anon$ 希望 $Soyo$ 能回答：对于街道构成的树 $T$，$f(T)$ 的值，因为时间紧急，所以只需要求出 $f(T) \mod 998244353$。  

你作为高智商的长颈鹿，现在就是你出手的时机，你需要帮 $Soyo$ 回答这个问题。

## 【输入输出格式】

### 输入
第 $1$ 行一个整数 $n$，表示街道构成的树的点数。  
第 $2 \sim n$ 行，每行两个整数 $u,v$，表示街道上存在一条连接 $u,v$ 的边。

### 输出
一行一个整数 $ans$ 表示答案。

## 【题目样例】

### 样例输入1
```
2
1 2
```

### 样例输出1
```
499122177
```

### 样例输入2
```
3
1 2
2 3
```

### 样例输出2
```
332748118
```

### 样例输入3
```
4
1 2
2 3
3 4
```

### 样例输出3
```
103983787   
```

### 样例输入4
```
10
4 5
1 9
6 1
8 4
5 9
4 7
3 10
5 2
4 3
```

### 样例输出4
```
462781191
```

## 【数据范围】
|子任务编号 |数据范围|分值|子任务依赖|
|:------:|:---------------------------------:|:------:|:-------:|
|1       |$n \le 3$                          |5       |无       |
|2       |$n \le 9$                          |5       |1        |
|3       |$n \le 18$                         |10      |2        |
|4       |$\forall (u,v),u=1$                |10      |无       |
|5       |$\forall (u,v),u=i,v=i+1,n\le 500$ |10      |无       |
|6       |$\forall (u,v),u=i,v=i+1$          |20      |5        |
|7       |$n \le 5000$                       |40      |3,4,6    |
<div STYLE="page-break-after: always;"></div>

# <center> 醒幸（hoshi）

## 【题目背景】
在远方的蓝色星球上，有着十分美丽的夜晚，天上的星星构成了一个极大的星座，**物格**座，寓意着格物致知。那里的人们都十分的学术，甚至有一个以星座命名的学院，**物格**学院。  

## 【题目描述】
这一天，**物格**学院的二年级生 $Rikka$ 在她的论文上遇到了难题，没办法，她只好求助具有丰富观测经验的你。  

**物格**座是一张有 $N$ 个点，$M$ 条边的无向图，第 $i$ 条边链接 $A_i$ 和 $B_i$，边权 $C_i$，由于**物格**座的特殊性，保证 $C_i$ 互不相同。  

$Rikka$ 会进行 $K$ 次操作，依次从 $1$ 到 $K$ 编号。  
第 $1$ 个操作会删掉图里一个边权和最大森林，第 $2$ 个人会删掉剩下图里一个边权和最大森林，以此类推，直到第 $K$ 个操作。（如果当前剩下的图为空，看做当前操作删除了 $0$ 条边，但依然进行了操作）。  

$Rikka$ 很可爱，所以她不会为难你，你只需要对于每条边，求出它是被哪次操作删掉的。


## 【输入输出格式】

### 输入
第一行三个整数 $N,M,K$。   
接下来 $M$ 行，每行三个整数 $A_i,B_i,C_i$，表示街道上存在一条连接 $A_i,B_i$ 的边，边权为 $C_i$。

### 输出
$M$ 行，第 $i$ 行一个整数，表示第 $i$ 条边被哪次操作删除了，如果没有被删除，输出 $0$。

## 【题目样例】

### 样例输入1
```
3 5 2
1 2 3
1 2 1
2 3 4
2 3 6
1 3 2
```

### 样例输出1
```
1
0
2
1
2
```

### 样例输入2
```
3 6 5
1 2 1
1 2 2
2 3 3
2 3 4
3 1 5
3 1 6
```

### 样例输出2
```
4
3
2
1
2
1
```

## 【数据范围】
对于全部的数据：$2\le N \le 1000,1\le M\le 3\times 10^5,1\le K\le 10^4,1\le C_i \le 10^9$
|子任务编号 |附加限制|分值|子任务依赖|
|:------:|:--------:|:------:|:-------:|
|1       |$K \le 10$|30      |无       |
|2       |无        |70      |1        |
<div STYLE="page-break-after: always;"></div>

# <center> 亚梓莎（slim）

## 【题目背景】
打了 300 年的史莱姆，不知不觉就满级了。  

## 【题目描述】
高原魔女所在的 A 村子里有 $n$ 个卡哇伊的史莱姆的雕塑，象征着高原魔女 300 年来清理史莱姆的卓越贡献。  

每个史莱姆都有一种元素，一共有 $m$ 种元素的史莱姆。由于高原魔女是 A 村里打史莱姆最有经验的前辈，村长给了高原魔女 $q$ 个艰巨的任务。  

对于第 $i$ 个任务，高原魔女将去往周围的第 $i$ 个村子，并在这个村子修建 $n$ 个雕塑，并且 $l_i\sim r_i$ 的史莱姆雕塑的元素要与 A 村保持一致。  

为了确保一定能够完成任务，高原魔女每次前往一个任务时都会带着 A 村子里的 $n$ 个史莱姆雕塑的副本，但是高原魔女前往的第 $i$ 个村子周围有着 $k_i$ 级的史莱姆波动，即第 $i$ 个村子周围活动着 $m \times k_i$ 个史莱姆，每种元素的各 $k_i$ 种。  

高原魔女修建雕塑时可能不一定使用她所带的雕塑副本，她可以去村子周围抓一个元素相同的史莱姆把它做成雕塑。修建雕塑自然难不倒高原魔女，但她想知道她有多少种**修建方案**。  
作为头脑简单的高原魔女自然不知道怎么计算，所以她只好来向你求助了。

**每个雕塑或史莱姆独立。**

## 【输入输出格式】

### 输入

第一行三个整数，$n$, $m$, $q$，分别表示 A 村子里雕塑数量，史莱姆元素种类数，任务个数。

第二行 $n$ 个整数，第 $i$ 个数表示自家村子的第 $i$ 的雕塑的史莱姆元素为 $a_i$。

接下来 $q$ 行，每行三个整数 $l_i$，$r_i$，$k_i$ 代表一个任务。


### 输出

输出共 $q$ 行，第 $i$ 行为第 $i$ 个任务的方案数，答案对 $998244353$ 取模。


## 【题目样例】


### 样例输入1
```
6 4 4
1 2 3 4 4 4
1 4 0
1 3 2
1 4 2
1 5 2
```

### 样例输出1
```
6
26730
12150
4860
```

### 样例输入2
```
5 5 3
1 2 3 4 5
1 2 100000
1 4 4
3 5 5
```

### 样例输出2
```
494942218
13125
151632
```

##  样例解释

在第一个样例的第二个询问中，高原魔女带的副本和第二个村子的史莱姆构成的集合为 $\{1, 1, 1, 2, 2, 2, 3, 3, 3, 4, 4, 4, 4, 4\}$。共有 $26730$ 种选择史莱姆的方案符合 $l_i \sim r_i$ 相同的条件。例如 $[1, 2, 3, 2, 2]$ 和 $[1, 2, 3, 4, 3]$ 是合法的修建方案，但选择的史莱姆不同算不同的方案。



|子任务编号 |数据范围|分值|子任务依赖|
|:------:|:----------------------------------:|:------:|:------:|
|1       |$n,m,q\leq10^3$                     |20      |无        |
|2       |$n,m\leq 10^5, q\leq 5\times 10^3$  |20      |1        |
|3       |保证 $k_i$ 只有一种取值              |20       |无       |
|4       |无特殊限制                           |40      |1,2,3    |

对于 $100\%$ 的数据，满足 $1 \leq n,m,q\leq 10^5, 0\leq k_i\leq 2\times 10^5, 1\leq l_i\leq r_i\leq n$，$k_i$ 的取值最多 $100$ 种。

<div STYLE="page-break-after: always;"></div>