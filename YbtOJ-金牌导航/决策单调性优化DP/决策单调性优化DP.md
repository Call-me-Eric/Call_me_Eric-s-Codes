# 决策单调性优化DP

## 例题A题解

设 $f_i$ 表示前 $i$ 个放到一起的最小花费，$sum_i$ 表示长度的前缀和，那么有：
$$
f_{i}=f_{j}+(sum_i-sum_j-L)^2
$$
发现这玩应没办法用数据结构维护。  
那怎么办呢？  
考虑证明两件事情：

第一件：对于同样的一个 $i$，满足什么条件时，两个决策点 $j_1,j_2,j_1<j_2$ 满足 $j_2$ 优于 $j_1$。  
发现两个式子对于 $f_i$ 的贡献都是 $f_{j}+(sum_i-sum_j-L)^2$。  
如果想让 $j_2$ 优于$j_1$，需要满足：
$$
f_{{j_2}}+(sum_i-sum_{j_2}-L)^2 > f_{{j_1}}+(sum_i-sum_{j_1}-L)^2\\
\iff f_{{j_2}}+(sum_{j_2}+L)^2-2\times (sum_{j_2}+L)\times sum_i+sum_i^2 > f_{{j_1}}+(sum_{j_1}+L)^2-2\times (sum_{j_1}+L)\times sum_i+sum_i^2\\
$$
